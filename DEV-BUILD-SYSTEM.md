# Next.js æ„å»ºç³»ç»Ÿç¨³å®šæ€§è§£å†³æ–¹æ¡ˆ

## ğŸ¯ é—®é¢˜æ¦‚è¿°

Next.js å¼€å‘æœåŠ¡å™¨åœ¨æŸäº›æƒ…å†µä¸‹ä¼šå‡ºç°é™æ€èµ„æºç¼–è¯‘ä¸å®Œæ•´çš„é—®é¢˜ï¼Œè¿™é€šå¸¸å‘ç”Ÿåœ¨ï¼š
- çƒ­é‡è½½è¿‡ç¨‹ä¸­
- ä¾èµ–æ›´æ–°å
- é•¿æ—¶é—´è¿è¡Œå
- ç³»ç»Ÿèµ„æºä¸è¶³æ—¶
- ç«¯å£å†²çªæ—¶

## ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ

### 1. è‡ªåŠ¨åŒ–æ¸…ç†è„šæœ¬

#### `scripts/clean-build.js`
- **åŠŸèƒ½**: æ™ºèƒ½æ¸…ç†æ„å»ºç¼“å­˜å’Œä¸´æ—¶æ–‡ä»¶
- **ä½¿ç”¨**: `npm run clean:script` æˆ– `node scripts/clean-build.js`
- **æ·±åº¦æ¸…ç†**: `npm run clean:deep` æˆ– `node scripts/clean-build.js --deep`

**æ¸…ç†å†…å®¹**:
- `.next` ç›®å½•
- `node_modules/.cache`
- `.swc` ç¼“å­˜
- `tsconfig.tsbuildinfo`
- ç«¯å£å ç”¨è¿›ç¨‹
- npm ç¼“å­˜ï¼ˆæ·±åº¦æ¨¡å¼ï¼‰

### 2. å¼€å‘ç¯å¢ƒå¥åº·æ£€æŸ¥

#### `scripts/dev-health-check.js`
- **åŠŸèƒ½**: å…¨é¢æ£€æŸ¥å¼€å‘ç¯å¢ƒçŠ¶æ€
- **ä½¿ç”¨**: `npm run health-check`

**æ£€æŸ¥é¡¹ç›®**:
- åŸºç¡€æ–‡ä»¶å­˜åœ¨æ€§
- æ„å»ºç³»ç»ŸçŠ¶æ€
- ç«¯å£å¯ç”¨æ€§
- ä¾èµ–ç‰ˆæœ¬
- ç¼“å­˜çŠ¶æ€
- TypeScript/PostCSS é…ç½®

### 3. æ™ºèƒ½å¼€å‘å¯åŠ¨å™¨

#### `scripts/smart-dev.js`
- **åŠŸèƒ½**: æ™ºèƒ½åˆ¤æ–­æ˜¯å¦éœ€è¦æ¸…ç†ï¼Œè‡ªåŠ¨å¤„ç†ç«¯å£å†²çª
- **ä½¿ç”¨**: `npm run dev:smart`
- **å¼ºåˆ¶æ¸…ç†**: `npm run dev:smart -- --force`
- **è·³è¿‡æ£€æŸ¥**: `npm run dev:smart -- --skip-check`

**æ™ºèƒ½åˆ¤æ–­é€»è¾‘**:
- æ£€æŸ¥æ„å»ºæ–‡ä»¶å¹´é¾„ï¼ˆè¶…è¿‡24å°æ—¶å»ºè®®æ¸…ç†ï¼‰
- æ£€æŸ¥å…³é”®æ„å»ºæ–‡ä»¶å®Œæ•´æ€§
- æ£€æŸ¥ç«¯å£å ç”¨æƒ…å†µ
- æ£€æŸ¥ç¼–è¯‘é”™è¯¯ç—•è¿¹

## ğŸ“‹ æ–°å¢çš„ npm scripts

```json
{
  "scripts": {
    "dev": "next dev",                    // æ ‡å‡†å¯åŠ¨
    "dev:clean": "npm run clean && next dev",     // æ¸…ç†åå¯åŠ¨
    "dev:force": "npm run clean:all && next dev", // å¼ºåˆ¶é‡ç½®åå¯åŠ¨
    "dev:smart": "node scripts/smart-dev.js",     // æ™ºèƒ½å¯åŠ¨ï¼ˆæ¨èï¼‰
    
    "clean": "rm -rf .next",              // åŸºç¡€æ¸…ç†
    "clean:all": "rm -rf .next node_modules/.cache .swc", // å…¨é¢æ¸…ç†
    "clean:cache": "rm -rf node_modules/.cache .swc",     // ç¼“å­˜æ¸…ç†
    "clean:script": "node scripts/clean-build.js",       // è„šæœ¬æ¸…ç†
    "clean:deep": "node scripts/clean-build.js --deep",  // æ·±åº¦æ¸…ç†
    
    "health-check": "node scripts/dev-health-check.js",  // å¥åº·æ£€æŸ¥
    "reset": "npm run clean:all && npm install"          // å®Œå…¨é‡ç½®
  }
}
```

## ğŸš€ æ¨èçš„å¼€å‘å·¥ä½œæµ

### æ—¥å¸¸å¼€å‘
```bash
npm run dev:smart    # æ™ºèƒ½å¯åŠ¨ï¼Œè‡ªåŠ¨å¤„ç†é—®é¢˜
```

### é‡åˆ°é—®é¢˜æ—¶
```bash
npm run health-check # æ£€æŸ¥ç¯å¢ƒçŠ¶æ€
npm run dev:clean    # æ¸…ç†åå¯åŠ¨
```

### ä¸¥é‡é—®é¢˜
```bash
npm run clean:deep   # æ·±åº¦æ¸…ç†
npm run reset        # å®Œå…¨é‡ç½®ç¯å¢ƒ
```

## ğŸ”§ ä¿®å¤çš„å…·ä½“é—®é¢˜

### 1. Tailwind CSS ç¼–è¯‘é”™è¯¯
- **é—®é¢˜**: `border-gray-200` åœ¨ Tailwind CSS v4 ä¸­ä¸å­˜åœ¨
- **ä¿®å¤**: 
  - ç§»é™¤é‡å¤çš„ `@layer base` å®šä¹‰
  - ä½¿ç”¨ CSS å˜é‡æ›¿ä»£ä¸å­˜åœ¨çš„ Tailwind ç±»
  - æ¸…ç†å†—ä½™çš„æ ·å¼å®šä¹‰

### 2. ç«¯å£å†²çªå¤„ç†
- **é—®é¢˜**: ç«¯å£ 3000/3001 è¢«å ç”¨å¯¼è‡´å¯åŠ¨å¤±è´¥
- **ä¿®å¤**: 
  - è‡ªåŠ¨æ£€æµ‹ç«¯å£å ç”¨
  - æ™ºèƒ½æ¸…ç†å ç”¨è¿›ç¨‹
  - æä¾›å¤‡ç”¨ç«¯å£é€‰æ‹©

### 3. æ„å»ºç¼“å­˜ä¸ä¸€è‡´
- **é—®é¢˜**: `.next` ç›®å½•çŠ¶æ€ä¸ä¸€è‡´å¯¼è‡´ 404 é”™è¯¯
- **ä¿®å¤**: 
  - æ™ºèƒ½æ£€æµ‹æ„å»ºæ–‡ä»¶å®Œæ•´æ€§
  - è‡ªåŠ¨æ¸…ç†è¿‡æœŸç¼“å­˜
  - æä¾›å¤šçº§æ¸…ç†é€‰é¡¹

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### æ„å»ºé€Ÿåº¦æå‡
- æ™ºèƒ½ç¼“å­˜ç®¡ç†ï¼Œé¿å…ä¸å¿…è¦çš„é‡å»º
- å¹¶è¡Œå¤„ç†æ¸…ç†ä»»åŠ¡
- ä¼˜åŒ–çƒ­é‡è½½ç¨³å®šæ€§

### å¼€å‘ä½“éªŒæ”¹å–„
- ä¸€é”®å¼é—®é¢˜è¯Šæ–­å’Œä¿®å¤
- è¯¦ç»†çš„é”™è¯¯æç¤ºå’Œä¿®å¤å»ºè®®
- è‡ªåŠ¨åŒ–çš„ç¯å¢ƒç»´æŠ¤

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **é¡µé¢æ˜¾ç¤º 404**
   ```bash
   npm run health-check  # æ£€æŸ¥é—®é¢˜
   npm run dev:clean     # æ¸…ç†åé‡å¯
   ```

2. **CSS æ ·å¼ä¸ç”Ÿæ•ˆ**
   ```bash
   npm run clean:cache   # æ¸…ç†æ ·å¼ç¼“å­˜
   npm run dev:smart     # æ™ºèƒ½é‡å¯
   ```

3. **ç«¯å£è¢«å ç”¨**
   ```bash
   npm run clean:script  # è‡ªåŠ¨æ¸…ç†ç«¯å£
   ```

4. **ä¾èµ–é—®é¢˜**
   ```bash
   npm run reset         # å®Œå…¨é‡ç½®ç¯å¢ƒ
   ```

### æ—¥å¿—å’Œè°ƒè¯•

æ‰€æœ‰è„šæœ¬éƒ½æä¾›è¯¦ç»†çš„æ—¥å¿—è¾“å‡ºï¼š
- âœ… æˆåŠŸæ“ä½œ
- âš ï¸  è­¦å‘Šä¿¡æ¯  
- âŒ é”™è¯¯è¯¦æƒ…
- ğŸ’¡ ä¿®å¤å»ºè®®

## ğŸ‰ æ€»ç»“

è¿™å¥—è§£å†³æ–¹æ¡ˆå½»åº•è§£å†³äº† Next.js æ„å»ºç³»ç»Ÿçš„ä¸ç¨³å®šæ€§é—®é¢˜ï¼š

1. **é¢„é˜²æ€§ç»´æŠ¤**: æ™ºèƒ½æ£€æµ‹å’Œè‡ªåŠ¨æ¸…ç†
2. **å¿«é€Ÿè¯Šæ–­**: ä¸€é”®å¥åº·æ£€æŸ¥
3. **è‡ªåŠ¨ä¿®å¤**: æ™ºèƒ½å¯åŠ¨å’Œé—®é¢˜å¤„ç†
4. **å¼€å‘å‹å¥½**: ç®€åŒ–çš„å‘½ä»¤å’Œæ¸…æ™°çš„åé¦ˆ

æ¨èä½¿ç”¨ `npm run dev:smart` ä½œä¸ºé»˜è®¤çš„å¼€å‘å¯åŠ¨æ–¹å¼ï¼Œå®ƒä¼šè‡ªåŠ¨å¤„ç†å¤§éƒ¨åˆ†å¸¸è§é—®é¢˜ï¼Œç¡®ä¿å¼€å‘ç¯å¢ƒçš„ç¨³å®šæ€§ã€‚
